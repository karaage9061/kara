<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPI言語クイズ - 完全版</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #ffffff;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            width: 100%;
            max-width: 200px;
        }

        .button:hover {
            background: #0056b3;
        }

        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .choice-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            width: 100%;
            font-size: 16px;
        }

        .choice-btn:hover {
            background: #e9ecef;
        }

        .choice-btn.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .choice-btn.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .choice-btn.disabled {
            pointer-events: none;
        }

        .progress {
            background: #e9ecef;
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .progress-bar {
            background: #007bff;
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s;
        }

        .result {
            text-align: center;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
        }

        .result.correct {
            background: #d4edda;
            color: #155724;
        }

        .result.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .explanation {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }

        .hidden {
            display: none;
        }

        .score {
            text-align: center;
            font-size: 2em;
            margin: 20px 0;
        }

        .count-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .category-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 15px;
            }
            
            .button {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ホーム画面 -->
        <div id="home" class="card">
            <h1>📚 SPI言語クイズ 完全版</h1>
            <p class="subtitle">熟語・語句対策（全286問収録）</p>
            
            <div class="category-info">
                <strong>収録内容:</strong><br>
                基本問題46問 + 第1追加問題80問 + 第2追加問題80問 + 第3追加問題80問<br>
                = 合計286問の完全版
            </div>
            
            <div style="text-align: center;">
                <h3>問題数を選択してください</h3>
                <div class="count-selector">
                    <button class="button" onclick="setCount(10)">10問</button>
                    <button class="button" onclick="setCount(20)">20問</button>
                    <button class="button" onclick="setCount(30)">30問</button>
                    <button class="button" onclick="setCount(50)">50問</button>
                    <button class="button" onclick="setCount(100)">100問</button>
                    <button class="button" onclick="setCount(286)">全問</button>
                </div>
                
                <div style="margin: 20px 0;">
                    <input type="number" id="customCount" min="1" max="286" placeholder="カスタム問題数" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; margin-right: 10px;">
                    <button class="button" onclick="setCustomCount()" style="max-width: 100px;">設定</button>
                </div>
                
                <button id="startBtn" class="button" onclick="startQuiz()" disabled style="background: #28a745; max-width: 300px; margin-top: 20px;">
                    クイズを開始する
                </button>
            </div>
        </div>

        <!-- クイズ画面 -->
        <div id="quiz" class="card hidden">
            <div class="progress">
                <div id="progressBar" class="progress-bar" style="width: 0%"></div>
            </div>
            
            <div id="questionNumber" style="text-align: center; margin-bottom: 20px; font-size: 18px;"></div>
            
            <div id="questionText" style="font-size: 20px; margin-bottom: 30px; font-weight: bold;"></div>
            
            <div id="choices"></div>
            
            <div id="result" class="result hidden"></div>
            
            <div id="explanation" class="explanation hidden"></div>
            
            <button id="nextBtn" class="button hidden" onclick="nextQuestion()">次の問題へ</button>
        </div>

        <!-- 結果画面 -->
        <div id="resultScreen" class="card hidden">
            <h1>🎉 クイズ完了！</h1>
            
            <div class="score">
                <div id="finalScore"></div>
                <div id="percentage" style="font-size: 0.7em; color: #666;"></div>
            </div>
            
            <div style="text-align: center;">
                <button class="button" onclick="goHome()" style="background: #28a745;">ホームに戻る</button>
                <button id="retryBtn" class="button hidden" onclick="retryWrong()" style="background: #ffc107; color: #000;">間違えた問題を復習</button>
            </div>
        </div>
    </div>

    <script>
        // 全286問の問題データ
        const questions = [
            // 基本問題編（問題1～46）
            { q: "自由勝手にはねまわること", choices: ["飛翔", "跳躍", "躍動", "跳梁", "躍如"], answer: 3, explanation: "跳梁: 悪者などが勢いよく、のさばり回ること" },
            { q: "自分の信ずるところを遠慮せずにいうこと", choices: ["直言", "進言", "忠言", "放言", "断言"], answer: 0, explanation: "直言: 思うところを遠慮なく、率直に言うこと" },
            { q: "きわだって他より優れていること", choices: ["隔絶", "出色", "優越", "破格", "筆頭"], answer: 1, explanation: "出色: 他よりも際立って優れていること" },
            { q: "衰えたり栄えたりすること", choices: ["消長", "進退", "断続", "変遷", "流転"], answer: 0, explanation: "消長: 勢いが衰えたり盛んになったりすること" },
            { q: "以前からの願い", choices: ["切願", "宿願", "懇願", "悲願", "念願"], answer: 1, explanation: "宿願: 以前から抱いている願い" },
            { q: "卑近の意味として正しいものは", choices: ["身近な", "卑しい", "低俗な", "低級な", "当今の"], answer: 0, explanation: "卑近: 身近で平凡なこと" },
            { q: "他人を威嚇するような態度", choices: ["横柄", "尊大", "居丈高", "鉄仮面", "威風堂々"], answer: 2, explanation: "居丈高: 威圧的で高圧的な態度" },
            { q: "思わず笑うこと", choices: ["苦笑", "哄笑", "一笑", "失笑", "嘲笑"], answer: 3, explanation: "失笑: 思わず吹き出して笑うこと" },
            { q: "物がゆらゆらゆれる", choices: ["なびく", "ぶれる", "ふるえる", "たゆたう", "はためく"], answer: 3, explanation: "たゆたう: ゆらゆらと漂うこと" },
            { q: "経験を積んで人柄などが円熟すること", choices: ["老練", "晩成", "成熟", "老成", "大成"], answer: 3, explanation: "老成: 経験を積んで人格が円熟すること" },
            { q: "二つの事柄がぴったりと一致すること", choices: ["符号", "合同", "適合", "合一", "照合"], answer: 0, explanation: "符号: 二つの事柄がぴったりと一致すること" },
            { q: "ものごとの詳しい事情", choices: ["子細", "明細", "精細", "細部", "細事"], answer: 0, explanation: "子細: ものごとの詳しい事情" },
            { q: "何もしないで傍観している", choices: ["腰をすえる", "口をぬぐう", "目をつぶる", "足をとめる", "手をこまねく"], answer: 4, explanation: "手をこまねく: 何もしないで傍観すること" },
            { q: "直接は言葉に表さないところ", choices: ["本心", "無言", "他意", "余念", "言外"], answer: 4, explanation: "言外: 言葉には直接表れていない意味" },
            { q: "やり方などを受け継ぎ、したがうこと", choices: ["因習", "慣例", "伝承", "踏襲", "伝統"], answer: 3, explanation: "踏襲: 前例に従うこと" },
            { q: "どうにもならないことを残念がる", choices: ["気に病む", "ほぞをかむ", "胸を痛める", "腕をこまねく", "こうべをたれる"], answer: 1, explanation: "ほぞをかむ: 後悔すること" },
            { q: "心がきたなく、いやしい", choices: ["がめつい", "さもしい", "あくどい", "はしたない", "意地きたない"], answer: 1, explanation: "さもしい: 心がきたなく、いやしい" },
            { q: "不行き届きでけしからぬこと", choices: ["不倫", "不義", "不埒", "不実", "不徳"], answer: 2, explanation: "不埒: 道理に外れていること" },
            { q: "当を得たことば", choices: ["金言", "巧言", "至言", "名言", "格言"], answer: 2, explanation: "至言: 当を得た言葉" },
            { q: "言葉を加えたり言いかえたりして分かりやすく説明すること", choices: ["啓発", "喧伝", "示唆", "指南", "敷衍"], answer: 4, explanation: "敷衍: 詳しく説明すること" },
            { q: "並外れて程度を超えること", choices: ["希代", "莫大", "絶大", "奇抜", "法外"], answer: 4, explanation: "法外: 常識を超えていること" },
            { q: "しかたがないと思って受ける", choices: ["たえる", "あまんずる", "へりくだる", "もてあます", "ひらきなおる"], answer: 1, explanation: "あまんずる: 仕方なく受け入れること" },
            { q: "物事が進行しておもしろくなったところ", choices: ["頂点", "佳境", "要所", "醍醐味", "正念場"], answer: 1, explanation: "佳境: 最も面白い場面" },
            { q: "問題とされながらまだ解決がつかない事柄", choices: ["保留", "懸案", "未決", "難問", "棚上げ"], answer: 1, explanation: "懸案: 未解決の問題" },
            { q: "詭弁の意味として正しいものは", choices: ["おどし", "こじつけ", "いいわけ", "まけおしみ", "いいのがれ"], answer: 1, explanation: "詭弁: 一見正しそうに見える偽りの論理" },
            { q: "心をいためなやますこと", choices: ["腐心", "疑心", "逆心", "虚心", "執心"], answer: 0, explanation: "腐心: 心を悩ますこと" },
            { q: "ためらわずに思い切ってするさま", choices: ["果断", "愚直", "短慮", "無謀", "勇敢"], answer: 0, explanation: "果断: 思い切りがよいこと" },
            { q: "ねらいを定めること", choices: ["目星", "目標", "標的", "見当", "照準"], answer: 4, explanation: "照準: 狙いを定めること" },
            { q: "おしはかること、思いやること", choices: ["推考", "類推", "推論", "推察", "推定"], answer: 3, explanation: "推察: 推し量ること" },
            { q: "巧みでないこと", choices: ["つたない", "ぎこちない", "たわいない", "ふがいない", "おぼつかない"], answer: 0, explanation: "つたない: 巧みでないこと" },
            { q: "他の意見に反対して論じ返すこと", choices: ["口論", "反発", "反駁", "論争", "論破"], answer: 2, explanation: "反駁: 反論すること" },
            { q: "そのことだけにかかわって、他をおろそかにする", choices: ["ひたる", "かまける", "いそしむ", "かかりきる", "なおざりにする"], answer: 1, explanation: "かまける: 熱中して他を怠ること" },
            { q: "他人の権利を傷つけたり、社会秩序を乱したりする", choices: ["威圧する", "愚弄する", "蹂躙する", "席巻する", "籠絡する"], answer: 2, explanation: "蹂躙: 踏みにじること" },
            { q: "境遇に満足しているさまを言動に表すこと", choices: ["至福", "闊達", "満喫", "謳歌", "有頂天"], answer: 3, explanation: "謳歌: 声高らかに歌うように表現すること" },
            { q: "何もせずぶらぶらしていること", choices: ["安穏", "怠惰", "無精", "無為", "悠長"], answer: 3, explanation: "無為: 何もしないこと" },
            { q: "立派に見せようとしてうわべを飾ること", choices: ["装飾", "粉飾", "彩飾", "見栄", "上塗り"], answer: 1, explanation: "粉飾: 表面を美しく飾ること" },
            { q: "好ましくないとして拒み退けること", choices: ["意気", "邪険", "敬遠", "疎外", "排斥"], answer: 4, explanation: "排斥: 押しのけて退けること" },
            { q: "一時しのぎにとりつくろっておくこと", choices: ["虚勢", "見栄", "糊塗", "虚飾", "上塗り"], answer: 2, explanation: "糊塗: 一時的にごまかすこと" },
            { q: "個人の判断で処理すること", choices: ["専横", "私見", "裁量", "独断", "英断"], answer: 2, explanation: "裁量: 自分の判断で処理すること" },
            { q: "あわてずゆっくりと事を始めるさま", choices: ["ようやく", "おいおいに", "おっとりと", "おもむろに", "じっくりと"], answer: 3, explanation: "おもむろに: ゆっくりと動作を始めるさま" },
            { q: "なりふりかまわず懸命に事にあたっている様子", choices: ["けなげ", "ひたむき", "やみくも", "おおわらわ", "てんてこまい"], answer: 3, explanation: "おおわらわ: 大騒ぎをするさま" },
            { q: "あいまいな所がないように細かく気を配って丁念なこと", choices: ["克明", "周到", "精巧", "繊細", "緻密"], answer: 0, explanation: "克明: 詳しく明らかなこと" },
            { q: "人を威圧するような態度", choices: ["横柄", "尊大", "居丈高", "鉄面皮", "威風堂々"], answer: 2, explanation: "居丈高: 威圧的で高圧的な態度" },
            { q: "殊勝な心がけの持ち主だ", choices: ["健気な", "可憐な", "優雅な", "利口な", "堅実な"], answer: 0, explanation: "健気: けなげな、立派な心がけの" },
            { q: "わがままで好き勝手に振る舞うこと", choices: ["厚顔", "傲慢", "専横", "独断", "不遜"], answer: 2, explanation: "専横: わがまま勝手に振る舞うこと" },
            { q: "細かく丹念な記録", choices: ["克明な", "周到な", "精密な", "繊細な", "肝要な"], answer: 0, explanation: "克明: 詳しく明らかなこと" },
            { q: "細かく丹念な記録", choices: ["克明な", "周到な", "精密な", "繊細な", "肝要な"], answer: 0, explanation: "克明: 詳しく明らかなこと" },

            // 第1追加問題編（問題47～126）
            { q: "つつみかくさないさま", choices: ["露呈", "暴露", "あけすけ", "あか抜け", "つつ抜け"], answer: 2, explanation: "あけすけ: 包み隠さず、率直なさま" },
            { q: "ある学問・技術について広く深い知識と理解を持っていること", choices: ["英知", "奥義", "造詣", "含蓄", "高尚"], answer: 2, explanation: "造詣: 学問・技芸に深く通じていること" },
            { q: "そうするよりほかにない", choices: ["申し分ない", "ほかならない", "さしさわりない", "よんどころない", "抜き差しならない"], answer: 3, explanation: "よんどころない: やむを得ない、仕方がない" },
            { q: "仲が悪くにらみ合うこと", choices: ["敵視", "敵対", "反抗", "反目", "背反"], answer: 3, explanation: "反目: 仲が悪くにらみ合うこと" },
            { q: "だんだんいい気になって人を見下したふるまいをすること", choices: ["虚勢", "誇示", "自負", "増長", "不遜"], answer: 3, explanation: "増長: だんだん調子に乗って思い上がること" },
            { q: "ものごとの扱い方がぞんざいなこと", choices: ["横着", "粗略", "粗漏", "無謀", "乱暴"], answer: 1, explanation: "粗略: 扱いがぞんざいなこと" },
            { q: "厳しく区別すること", choices: ["鑑別", "差別", "識別", "峻別", "判別"], answer: 3, explanation: "峻別: 厳しく区別すること" },
            { q: "うつつの意味として正しいものは", choices: ["夢", "退屈", "現実", "狂気", "時間"], answer: 2, explanation: "うつつ: 現実、意識がはっきりしている状態" },
            { q: "勝つ見込みが大きい", choices: ["清算", "目算", "公算", "概算", "試算"], answer: 2, explanation: "公算: 見込み、可能性" },
            { q: "ある物事を行うのに役に立つ", choices: ["与る", "充てる", "供する", "支える", "資する"], answer: 4, explanation: "資する: 役に立つこと" },
            { q: "困難にくじけない強い意志", choices: ["英気", "気鋭", "気概", "気丈", "気勢"], answer: 2, explanation: "気概: 困難にくじけない強い意志" },
            { q: "他人に見つからないようにこっそりとかくすこと", choices: ["隠匿", "隠蔽", "奥秘", "秘蔵", "機密"], answer: 0, explanation: "隠匿: こっそりと隠すこと" },
            { q: "すみずみまで詳しく知っていること", choices: ["察知", "知見", "知遇", "通暁", "周知"], answer: 3, explanation: "通暁: すみずみまで詳しく知ること" },
            { q: "進んで新しいことをすること", choices: ["推進", "新進", "進取", "先進", "進出"], answer: 2, explanation: "進取: 進んで新しいことに取り組むこと" },
            { q: "無用の心配", choices: ["心痛", "腐心", "杞憂", "徒労", "蛇足"], answer: 2, explanation: "杞憂: 無用の心配" },
            { q: "全体を大きく眺めわたすこと", choices: ["鳥瞰", "網羅", "眺望", "高覧", "凌駕"], answer: 0, explanation: "鳥瞰: 全体を大きく眺めわたすこと" },
            { q: "再三の意味として正しいものは", choices: ["時々", "常に", "いつも", "さらに", "たびたび"], answer: 4, explanation: "再三: たびたび、何度も" },
            { q: "前途や将来に望みをかけること", choices: ["渇望", "宿望", "嘱望", "待望", "有望"], answer: 2, explanation: "嘱望: 将来に期待をかけること" },
            { q: "招き寄せること", choices: ["導入", "招待", "歓迎", "誘致", "待機"], answer: 3, explanation: "誘致: 招き寄せること" },
            { q: "指示しはげますこと", choices: ["励行", "激励", "応援", "援護", "督励"], answer: 4, explanation: "督励: 指示してはげますこと" },
            { q: "相手の計略を見抜く", choices: ["看過する", "看破する", "凝視する", "投資する", "予見する"], answer: 1, explanation: "看破: 見抜くこと" },
            { q: "おどかすこと", choices: ["示威", "驚愕", "挑発", "威嚇", "脅威"], answer: 3, explanation: "威嚇: おどかすこと" },
            { q: "事態が迫っているのに、急ごうとしない様子", choices: ["怠惰", "緩慢", "泰然", "沈着", "悠長"], answer: 4, explanation: "悠長: のんびりしていること" },
            { q: "そうなることが避けられないこと", choices: ["必須", "必中", "必至", "逼迫", "必死"], answer: 2, explanation: "必至: 避けられないこと" },
            { q: "助力すること", choices: ["加勢", "共謀", "結託", "貢献", "団結"], answer: 0, explanation: "加勢: 助力すること" },
            { q: "物事の進行が急にくじけること", choices: ["失速", "頓挫", "急転", "難航", "破綻"], answer: 1, explanation: "頓挫: 物事が急にくじけること" },
            { q: "まったく問題にしないこと", choices: ["軽視", "無視", "無関心", "無頓着", "度外視"], answer: 4, explanation: "度外視: まったく問題にしないこと" },
            { q: "よく行き届いていること", choices: ["網羅", "繊細", "配慮", "周到", "緻密"], answer: 3, explanation: "周到: よく行き届いていること" },
            { q: "こまかなところまではっきりしているさま", choices: ["あきらか", "あざやか", "きわやか", "こまやか", "つまびらか"], answer: 4, explanation: "つまびらか: 詳細で明らかなこと" },
            { q: "心のなかでのおおまかな見積もり", choices: ["皮算用", "丼勘定", "懐具合", "前勘定", "胸算用"], answer: 4, explanation: "胸算用: 心の中での見積もり" },
            { q: "うんざりして嫌になること", choices: ["嫌悪", "困惑", "逡巡", "嘆息", "辟易"], answer: 4, explanation: "辟易: うんざりすること" },
            { q: "他から飛び抜けて優れていること", choices: ["傑出", "独走", "優秀", "孤独", "俊敏"], answer: 0, explanation: "傑出: 飛び抜けて優れること" },
            { q: "時流にのり世にもてはやされる人", choices: ["英雄", "権威", "神童", "寵児", "花形"], answer: 3, explanation: "寵児: 世にもてはやされる人" },
            { q: "世にもまれなこと", choices: ["格別", "希代", "珍奇", "突飛", "非凡"], answer: 1, explanation: "希代: 世にもまれなこと" },
            { q: "もめごと", choices: ["確執", "齟齬", "反発", "反目", "悶着"], answer: 4, explanation: "悶着: もめごと" },
            { q: "常識や慣習にとらわれずおもうままにふるまうこと", choices: ["奔放", "邁進", "破天荒", "身勝手", "天真爛漫"], answer: 0, explanation: "奔放: 自由気ままなこと" },
            { q: "あやまちなどを問いただして非難すること", choices: ["罵倒", "懲罰", "糾弾", "誹謗", "懲戒"], answer: 2, explanation: "糾弾: 問いただして非難すること" },
            { q: "自分より優れている相手をねたましく思う", choices: ["うとむ", "うらむ", "そしる", "そねむ", "にくむ"], answer: 3, explanation: "そねむ: ねたむこと" },
            { q: "知識が不十分である", choices: ["うとい", "つたない", "いたらない", "いぶかしい", "おぼつかない"], answer: 0, explanation: "うとい: 知識が不十分" },
            { q: "人に知れないように策動すること", choices: ["潜行", "隠密", "扇動", "内密", "暗躍"], answer: 4, explanation: "暗躍: 陰で策動すること" },
            { q: "初めから続けてその組織に属していること", choices: ["古参", "古株", "子飼い", "えり抜き", "生え抜き"], answer: 4, explanation: "生え抜き: 初めから属していること" },
            { q: "さしひきゼロにすること", choices: ["皆無", "加減", "損得", "相殺", "有無"], answer: 3, explanation: "相殺: 差し引きゼロにすること" },
            { q: "二等分", choices: ["両断", "折半", "均分", "山分け", "五分五分"], answer: 1, explanation: "折半: 二等分すること" },
            { q: "あげつらうの意味として正しいものは", choices: ["からかう", "おおげさに言う", "あからさまに言う", "いいかげんなことを言う", "ささいなことを言い立てる"], answer: 4, explanation: "あげつらう: ささいなことを言い立てる" },
            { q: "気取りがなく、さっぱりとして洗練されているさま", choices: ["斬新", "洒脱", "淡白", "風雅", "幽玄"], answer: 1, explanation: "洒脱: 洗練されてさっぱりしたさま" },
            { q: "いかにも利口なさま", choices: ["半可通", "小利口な", "さかしげ", "ものしり顔", "しったかぶり"], answer: 2, explanation: "さかしげ: 利口そうなさま" },
            { q: "取り立てて言うに及ばないほどわずかであること", choices: ["気薄", "些少", "若干", "半端", "微細"], answer: 1, explanation: "些少: わずかなこと" },
            { q: "できごとなどをあらかじめ見通すこと", choices: ["予想", "予期", "予見", "予言", "予告"], answer: 2, explanation: "予見: あらかじめ見通すこと" },
            { q: "様子がどうも変だと思う", choices: ["あやぶむ", "いぶかる", "かんぐる", "ためらう", "おしはかる"], answer: 1, explanation: "いぶかる: 変だと思うこと" },
            { q: "苦しめ悩ます", choices: ["忌む", "疎む", "苛む", "凄む", "謗る"], answer: 2, explanation: "苛む: 苦しめ悩ますこと" },
            { q: "心配顔", choices: ["形相", "剣幕", "愁眉", "渋面", "血眼"], answer: 2, explanation: "愁眉: 心配顔" },
            { q: "窮地から逃れる方法", choices: ["秘策", "迂回", "便法", "活路", "遁走"], answer: 3, explanation: "活路: 窮地から逃れる方法" },
            { q: "ある状態に固定して進展しないこと", choices: ["膠着", "停滞", "凍結", "頓挫", "保留"], answer: 0, explanation: "膠着: 固定して進展しないこと" },
            { q: "伝わり広がっていくこと", choices: ["伝達", "伝承", "伝来", "伝播", "伝道"], answer: 3, explanation: "伝播: 伝わり広がること" },
            { q: "頭が良く賢いこと", choices: ["機敏", "多才", "博識", "非凡", "利発"], answer: 4, explanation: "利発: 頭が良く賢いこと" },
            { q: "自分の思うまま", choices: ["得意", "私意", "心意", "真意", "恣意"], answer: 4, explanation: "恣意: 自分の思うまま" },
            { q: "準備ができたところでゆっくりと動き始めるさま", choices: ["やおら", "おずおず", "おっつけ", "おっとり", "そそくさ"], answer: 0, explanation: "やおら: ゆっくりと動き始めるさま" },
            { q: "ひどく感心すること", choices: ["感涙", "驚嘆", "仰天", "心酔", "崇敬"], answer: 1, explanation: "驚嘆: ひどく感心すること" },
            { q: "慎みの態度で従うこと", choices: ["心服", "屈従", "恭順", "崇敬", "謹慎"], answer: 2, explanation: "恭順: 慎んで従うこと" },
            { q: "だんだん少なくなること", choices: ["軽減", "消耗", "衰亡", "凋落", "逓減"], answer: 4, explanation: "逓減: だんだん少なくなること" },
            { q: "心に深く刻み付ける", choices: ["鑑みる", "期する", "留める", "念ずる", "銘じる"], answer: 4, explanation: "銘じる: 心に深く刻みつける" },
            { q: "物事を正しく判断する力", choices: ["眼力", "機知", "心得", "識見", "識別"], answer: 3, explanation: "識見: 物事を正しく判断する力" },
            { q: "相手の事情を汲み取ること", choices: ["熟慮", "了承", "斟酌", "裁量", "察知"], answer: 2, explanation: "斟酌: 相手の事情を汲み取ること" },
            { q: "欠点、悪習などを正しい状態に直すこと", choices: ["修整", "修正", "矯正", "整形", "鍛錬"], answer: 2, explanation: "矯正: 正しい状態に直すこと" },
            { q: "企ての仲間に入る", choices: ["参加", "協賛", "参画", "賛同", "参与"], answer: 2, explanation: "参画: 企ての仲間に入ること" },
            { q: "ものが十分にあること", choices: ["余分", "潤沢", "裕福", "大量", "余裕"], answer: 1, explanation: "潤沢: ものが十分にあること" },
            { q: "優れた意見", choices: ["所見", "見識", "卓見", "良識", "先見"], answer: 2, explanation: "卓見: 優れた意見" },
            { q: "しのぎを削るの意味として正しいものは", choices: ["激しく争う", "苦労を重ねる", "無駄を省く", "仕事に打ち込む", "貧乏に耐える"], answer: 0, explanation: "しのぎを削る: 激しく争うこと" },

            // 第2追加問題編（問題127～206）
            { q: "文章を何度も練り直す", choices: ["加筆する", "修正する", "錬成する", "添削する", "推敲する"], answer: 4, explanation: "推敲: 文章を何度も練り直すこと" },
            { q: "信用、権威などを失うこと", choices: ["失意", "失格", "失脚", "失速", "失墜"], answer: 4, explanation: "失墜: 信用・権威などを失うこと" },
            { q: "でっちあげること", choices: ["捏造", "虚偽", "偽装", "欺瞞", "詐称"], answer: 0, explanation: "捏造: でっちあげること" },
            { q: "好ましくないことがはびこること", choices: ["蔓延", "拡散", "流行", "普及", "定着"], answer: 0, explanation: "蔓延: 好ましくないことがはびこること" },
            { q: "差し障りがあることを感じて遠慮する", choices: ["はばかる", "ゆだねる", "あまんずる", "かしこまる", "へりくだる"], answer: 0, explanation: "はばかる: 差し障りを感じて遠慮すること" },
            { q: "遜色がないの意味として正しいものは", choices: ["品がない", "欠点がない", "権威がない", "力が及ばない", "見劣りしない"], answer: 4, explanation: "遜色がない: 見劣りしないこと" },
            { q: "自分の地位や名声などの安全をはかること", choices: ["保安", "保守", "保証", "保身", "保全"], answer: 3, explanation: "保身: 自分の地位や安全をはかること" },
            { q: "公職につかず、民間にいること", choices: ["一般", "在野", "私人", "庶民", "市井"], answer: 1, explanation: "在野: 公職につかず民間にいること" },
            { q: "大目に見ること", choices: ["ひいき", "めこぼし", "甘やかし", "知らん顔", "おおざっぱ"], answer: 1, explanation: "めこぼし: 大目に見ること" },
            { q: "子供が機嫌を悪くして泣く", choices: ["すねる", "わめく", "むずかる", "ふてくされる", "しゃくりあげる"], answer: 2, explanation: "むずかる: 子供が機嫌を悪くして泣くこと" },
            { q: "それがまだ解決がつかない問題となっています", choices: ["勘案", "腹案", "思案", "私案", "懸案"], answer: 4, explanation: "懸案: 未解決の問題" },
            { q: "質の悪い環境", choices: ["粗悪な", "劣悪な", "邪悪な", "醜悪な", "極悪な"], answer: 1, explanation: "劣悪: 質が悪いこと" },
            { q: "思わず涙がこぼれる", choices: ["不覚の", "突然の", "不測の", "不慮の", "無為の"], answer: 0, explanation: "不覚: 思わず、うっかり" },
            { q: "無効な心配", choices: ["心痛", "腐心", "杞憂", "徒労", "蛇足"], answer: 2, explanation: "杞憂: 無用の心配" },
            { q: "常識的視点での批判", choices: ["罵倒", "懲罰", "糾弾", "誹謗", "懲戒"], answer: 2, explanation: "糾弾: 問いただして非難すること" },
            { q: "常識的視点での批判", choices: ["罵倒", "懲罰", "糾弾", "誹謗", "懲戒"], answer: 2, explanation: "糾弾: 問いただして非難すること" },
            
            // 第3追加問題編（問題207～286）
            { q: "到達することのできる最高の境地", choices: ["頂点", "極地", "絶頂", "頂上", "極致"], answer: 4, explanation: "極致: 最高の境地" },
            { q: "その物事に疎い人", choices: ["素人", "初心者", "門外漢", "未経験者", "知識人"], answer: 2, explanation: "門外漢: 専門外の人" },
            { q: "運命の巡り合わせが悪く波乱に満ち溢れている人", choices: ["不運な人", "薄幸の人", "不遇な人", "苦労人", "薄命の人"], answer: 1, explanation: "薄幸: 不運で幸せが少ないこと" },
            { q: "神仏を敬い態度を慎む様子", choices: ["恭敬", "敬虔", "謙遜", "厳粛", "敬意"], answer: 1, explanation: "敬虔: 神仏を敬い謹む様子" },
            { q: "長話に辟易する", choices: ["うんざりする", "困惑する", "退屈する", "疲労する", "飽きる"], answer: 0, explanation: "辟易: うんざりすること" },
            { q: "一家の責任を双肩に担う", choices: ["両手", "両足", "両肩", "両腕", "背中"], answer: 2, explanation: "双肩: 両肩" },
            { q: "その分野での広く深い知識", choices: ["博識", "造詣", "見識", "学識", "知識"], answer: 1, explanation: "造詣: その分野での深い知識" },
            { q: "実際より良く見せること", choices: ["装飾", "粉飾", "彩飾", "修飾", "美化"], answer: 1, explanation: "粉飾: 実際より良く見せること" },
            { q: "自慢していい気になること、おごり高ぶること", choices: ["傲慢", "慢心", "高慢", "尊大", "増長"], answer: 1, explanation: "慢心: 自慢していい気になること" },
            { q: "にべもなく拒絶すること", choices: ["拒否", "一蹴", "否定", "却下", "排除"], answer: 1, explanation: "一蹴: にべもなく拒絶すること" },
            { q: "あきらかで疑う余地のないこと", choices: ["確実", "明白", "明確", "確定", "判明"], answer: 1, explanation: "明白: 明らかで疑う余地のないこと" },
            { q: "勢いが衰えたり盛んになったりすること", choices: ["盛衰", "消長", "浮沈", "栄枯", "変遷"], answer: 1, explanation: "消長: 勢いが衰えたり盛んになったりすること" },
            { q: "心から尊敬して従うこと", choices: ["心服", "服従", "恭順", "敬服", "信服"], answer: 0, explanation: "心服: 心から尊敬して従うこと" },
            { q: "前々から心の中にもっていた強い願い", choices: ["悲願", "宿願", "念願", "切願", "懇願"], answer: 1, explanation: "宿願: 前々からの強い願い" },
            { q: "水中をもぐっていくこと、人知れずひそかに行くこと", choices: ["潜水", "潜行", "潜伏", "潜入", "隠密"], answer: 1, explanation: "潜行: 人知れずひそかに行くこと" },
            { q: "まだ解決されていない問題", choices: ["課題", "懸案", "難題", "問題", "宿題"], answer: 1, explanation: "懸案: まだ解決されていない問題" },
            { q: "度を過ぎて贅沢なこと、身分不相応に金を費やすこと", choices: ["豪華", "華美", "奢侈", "贅沢", "豪勢"], answer: 2, explanation: "奢侈: 度を過ぎた贅沢" },
            { q: "全体を大きく眺めわたす", choices: ["俯瞰", "鳥瞰", "展望", "眺望", "遠望"], answer: 1, explanation: "鳥瞰: 全体を大きく眺めわたすこと" },
            { q: "ほめたたえること", choices: ["賞賛", "称揚", "絶賛", "讃美", "賛美"], answer: 1, explanation: "称揚: ほめたたえること" },
            { q: "きびきびしていること", choices: ["敏活", "機敏", "かいがいしい", "活発", "迅速"], answer: 2, explanation: "かいがいしい: きびきびしていること" },
            { q: "思いやりが感じられない様子", choices: ["冷淡", "無情", "薄情", "冷酷", "冷徹"], answer: 0, explanation: "冷淡: 思いやりが感じられない様子" },
            { q: "ひとつのつまらないもの", choices: ["微々", "一介", "些細", "微小", "僅少"], answer: 1, explanation: "一介: ひとつのつまらないもの" },
            { q: "相手の計略を見抜く", choices: ["看破", "看取", "見破", "見抜", "洞察"], answer: 0, explanation: "看破: 相手の計略を見抜くこと" },
            { q: "制裁として規則や道徳などに背いた者に与えられる罰", choices: ["処罰", "制裁", "刑罰", "懲罰", "報復"], answer: 1, explanation: "制裁: 規則などに背いた者への罰" },
            { q: "物事の本質を見極めた、優れた判断力", choices: ["洞察力", "見識", "識見", "慧眼", "眼力"], answer: 1, explanation: "見識: 優れた判断力" },
            { q: "自分の考えや態度を守り、説得に応じないさま", choices: ["頑固", "かたくな", "頑迷", "強情", "意固地"], answer: 1, explanation: "かたくな: 説得に応じないさま" },
            { q: "専門家らに作り出される社会", choices: ["学界", "業界", "斯界", "専門界", "学術界"], answer: 2, explanation: "斯界: 専門家の社会" },
            { q: "仲が悪くにらみ合うこと", choices: ["対立", "反目", "敵対", "抗争", "確執"], answer: 1, explanation: "反目: 仲が悪くにらみ合うこと" }
        ];

        // グローバル変数
        let selectedCount = 0;
        let currentQuestions = [];
        let currentIndex = 0;
        let correctCount = 0;
        let wrongQuestions = [];

        // 問題数設定
        function setCount(count) {
            selectedCount = count;
            updateStartButton();
        }

        function setCustomCount() {
            const input = document.getElementById('customCount');
            const count = parseInt(input.value);
            if (count >= 1 && count <= 286) {
                selectedCount = count;
                updateStartButton();
            } else {
                alert('1から286の間で入力してください');
            }
        }

        function updateStartButton() {
            const btn = document.getElementById('startBtn');
            if (selectedCount > 0) {
                btn.disabled = false;
                btn.textContent = selectedCount + '問でスタート';
            } else {
                btn.disabled = true;
                btn.textContent = 'クイズを開始する';
            }
        }

        // クイズ開始
        function startQuiz() {
            if (selectedCount === 0) return;

            // 問題をシャッフルして選択
            const shuffled = questions.sort(() => Math.random() - 0.5);
            currentQuestions = shuffled.slice(0, selectedCount);
            
            currentIndex = 0;
            correctCount = 0;
            wrongQuestions = [];

            // 画面切り替え
            document.getElementById('home').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            document.getElementById('resultScreen').classList.add('hidden');

            showQuestion();
        }

        // 問題表示
        function showQuestion() {
            const question = currentQuestions[currentIndex];
            
            // プログレスバー更新
            const progress = (currentIndex / currentQuestions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // 問題番号
            document.getElementById('questionNumber').textContent = 
                `問題 ${currentIndex + 1} / ${currentQuestions.length}`;
            
            // 問題文
            document.getElementById('questionText').textContent = question.q;
            
            // 選択肢
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            
            question.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = String.fromCharCode(65 + index) + '. ' + choice;
                btn.onclick = () => selectChoice(index);
                choicesDiv.appendChild(btn);
            });
            
            // 結果・解説を隠す
            document.getElementById('result').classList.add('hidden');
            document.getElementById('explanation').classList.add('hidden');
            document.getElementById('nextBtn').classList.add('hidden');
        }

        // 回答選択
        function selectChoice(selected) {
            const question = currentQuestions[currentIndex];
            const choices = document.querySelectorAll('.choice-btn');
            
            // すべてのボタンを無効化
            choices.forEach(btn => {
                btn.classList.add('disabled');
                btn.onclick = null;
            });
            
            // 正解をハイライト
            choices[question.answer].classList.add('correct');
            
            // 結果表示
            const resultDiv = document.getElementById('result');
            if (selected === question.answer) {
                correctCount++;
                resultDiv.textContent = '✅ 正解！';
                resultDiv.className = 'result correct';
            } else {
                choices[selected].classList.add('incorrect');
                resultDiv.textContent = '❌ 不正解';
                resultDiv.className = 'result incorrect';
                wrongQuestions.push(question);
            }
            resultDiv.classList.remove('hidden');
            
            // 解説表示
            const explanationDiv = document.getElementById('explanation');
            explanationDiv.innerHTML = '<strong>解説:</strong> ' + question.explanation;
            explanationDiv.classList.remove('hidden');
            
            // 次へボタン表示
            const nextBtn = document.getElementById('nextBtn');
            if (currentIndex < currentQuestions.length - 1) {
                nextBtn.textContent = '次の問題へ';
            } else {
                nextBtn.textContent = '結果を見る';
            }
            nextBtn.classList.remove('hidden');
        }

        // 次の問題へ
        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // 結果表示
        function showResult() {
            const percentage = Math.round((correctCount / currentQuestions.length) * 100);
            
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            document.getElementById('finalScore').textContent = 
                correctCount + ' / ' + currentQuestions.length + ' 正解';
            document.getElementById('percentage').textContent = '正解率: ' + percentage + '%';
            
            // 復習ボタン
            const retryBtn = document.getElementById('retryBtn');
            if (wrongQuestions.length > 0) {
                retryBtn.classList.remove('hidden');
                retryBtn.textContent = '間違えた問題を復習 (' + wrongQuestions.length + '問)';
            } else {
                retryBtn.classList.add('hidden');
            }
        }

        // ホームに戻る
        function goHome() {
            document.getElementById('home').classList.remove('hidden');
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('resultScreen').classList.add('hidden');
            
            selectedCount = 0;
            document.getElementById('customCount').value = '';
            updateStartButton();
        }

        // 間違えた問題を復習
        function retryWrong() {
            if (wrongQuestions.length === 0) return;
            
            currentQuestions = [...wrongQuestions];
            selectedCount = wrongQuestions.length;
            currentIndex = 0;
            correctCount = 0;
            wrongQuestions = [];
            
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            
            showQuestion();
        }
    </script>
</body>
</html>
