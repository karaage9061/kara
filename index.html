<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPIè¨€èªã‚¯ã‚¤ã‚º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #ffffff;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            width: 100%;
            max-width: 200px;
        }

        .button:hover {
            background: #0056b3;
        }

        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .choice-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            width: 100%;
            font-size: 16px;
        }

        .choice-btn:hover {
            background: #e9ecef;
        }

        .choice-btn.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .choice-btn.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .choice-btn.disabled {
            pointer-events: none;
        }

        .progress {
            background: #e9ecef;
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .progress-bar {
            background: #007bff;
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s;
        }

        .result {
            text-align: center;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
        }

        .result.correct {
            background: #d4edda;
            color: #155724;
        }

        .result.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .explanation {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }

        .hidden {
            display: none;
        }

        .score {
            text-align: center;
            font-size: 2em;
            margin: 20px 0;
        }

        .count-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 15px;
            }
            
            .button {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
        <div id="home" class="card">
            <h1>ğŸ“š SPIè¨€èªã‚¯ã‚¤ã‚º</h1>
            <p style="text-align: center; margin-bottom: 30px;">ç†Ÿèªãƒ»èªå¥å¯¾ç­–ï¼ˆ50å•åéŒ²ï¼‰</p>
            
            <div style="text-align: center;">
                <h3>å•é¡Œæ•°ã‚’é¸æŠã—ã¦ãã ã•ã„</h3>
                <div class="count-selector">
                    <button class="button" onclick="setCount(10)">10å•</button>
                    <button class="button" onclick="setCount(20)">20å•</button>
                    <button class="button" onclick="setCount(30)">30å•</button>
                    <button class="button" onclick="setCount(50)">å…¨å•</button>
                </div>
                
                <div style="margin: 20px 0;">
                    <input type="number" id="customCount" min="1" max="50" placeholder="ã‚«ã‚¹ã‚¿ãƒ å•é¡Œæ•°" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; margin-right: 10px;">
                    <button class="button" onclick="setCustomCount()" style="max-width: 100px;">è¨­å®š</button>
                </div>
                
                <button id="startBtn" class="button" onclick="startQuiz()" disabled style="background: #28a745; max-width: 300px; margin-top: 20px;">
                    ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹ã™ã‚‹
                </button>
            </div>
        </div>

        <!-- ã‚¯ã‚¤ã‚ºç”»é¢ -->
        <div id="quiz" class="card hidden">
            <div class="progress">
                <div id="progressBar" class="progress-bar" style="width: 0%"></div>
            </div>
            
            <div id="questionNumber" style="text-align: center; margin-bottom: 20px; font-size: 18px;"></div>
            
            <div id="questionText" style="font-size: 20px; margin-bottom: 30px; font-weight: bold;"></div>
            
            <div id="choices"></div>
            
            <div id="result" class="result hidden"></div>
            
            <div id="explanation" class="explanation hidden"></div>
            
            <button id="nextBtn" class="button hidden" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="resultScreen" class="card hidden">
            <h1>ğŸ‰ ã‚¯ã‚¤ã‚ºå®Œäº†ï¼</h1>
            
            <div class="score">
                <div id="finalScore"></div>
                <div id="percentage" style="font-size: 0.7em; color: #666;"></div>
            </div>
            
            <div style="text-align: center;">
                <button class="button" onclick="goHome()" style="background: #28a745;">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
                <button id="retryBtn" class="button hidden" onclick="retryWrong()" style="background: #ffc107; color: #000;">é–“é•ãˆãŸå•é¡Œã‚’å¾©ç¿’</button>
            </div>
        </div>
    </div>

    <script>
        // å•é¡Œãƒ‡ãƒ¼ã‚¿
        const questions = [
            {
                q: "è‡ªç”±å‹æ‰‹ã«ã¯ã­ã¾ã‚ã‚‹ã“ã¨",
                choices: ["é£›ç¿”", "è·³èº", "èºå‹•", "è·³æ¢", "èºå¦‚"],
                answer: 3,
                explanation: "è·³æ¢: æ‚ªè€…ãªã©ãŒå‹¢ã„ã‚ˆãã€ã®ã•ã°ã‚Šå›ã‚‹ã“ã¨"
            },
            {
                q: "è‡ªåˆ†ã®ä¿¡ãšã‚‹ã¨ã“ã‚ã‚’é æ…®ã›ãšã«ã„ã†ã“ã¨",
                choices: ["ç›´è¨€", "é€²è¨€", "å¿ è¨€", "æ”¾è¨€", "æ–­è¨€"],
                answer: 0,
                explanation: "ç›´è¨€: æ€ã†ã¨ã“ã‚ã‚’é æ…®ãªãã€ç‡ç›´ã«è¨€ã†ã“ã¨"
            },
            {
                q: "ãã‚ã ã£ã¦ä»–ã‚ˆã‚Šå„ªã‚Œã¦ã„ã‚‹ã“ã¨",
                choices: ["éš”çµ¶", "å‡ºè‰²", "å„ªè¶Š", "ç ´æ ¼", "ç­†é ­"],
                answer: 1,
                explanation: "å‡ºè‰²: ä»–ã‚ˆã‚Šã‚‚éš›ç«‹ã£ã¦å„ªã‚Œã¦ã„ã‚‹ã“ã¨"
            },
            {
                q: "è¡°ãˆãŸã‚Šæ „ãˆãŸã‚Šã™ã‚‹ã“ã¨",
                choices: ["æ¶ˆé•·", "é€²é€€", "æ–­ç¶š", "å¤‰é·", "æµè»¢"],
                answer: 0,
                explanation: "æ¶ˆé•·: å‹¢ã„ãŒè¡°ãˆãŸã‚Šç››ã‚“ã«ãªã£ãŸã‚Šã™ã‚‹ã“ã¨"
            },
            {
                q: "ä»¥å‰ã‹ã‚‰ã®é¡˜ã„",
                choices: ["åˆ‡é¡˜", "å®¿é¡˜", "æ‡‡é¡˜", "æ‚²é¡˜", "å¿µé¡˜"],
                answer: 1,
                explanation: "å®¿é¡˜: ä»¥å‰ã‹ã‚‰æŠ±ã„ã¦ã„ã‚‹é¡˜ã„"
            },
            {
                q: "ä»–äººã‚’å¨åš‡ã™ã‚‹ã‚ˆã†ãªæ…‹åº¦",
                choices: ["æ¨ªæŸ„", "å°Šå¤§", "å±…ä¸ˆé«˜", "é‰„ä»®é¢", "å¨é¢¨å ‚ã€…"],
                answer: 2,
                explanation: "å±…ä¸ˆé«˜: å¨åœ§çš„ã§é«˜åœ§çš„ãªæ…‹åº¦"
            },
            {
                q: "æ€ã‚ãšç¬‘ã†ã“ã¨",
                choices: ["è‹¦ç¬‘", "å“„ç¬‘", "ä¸€ç¬‘", "å¤±ç¬‘", "å˜²ç¬‘"],
                answer: 3,
                explanation: "å¤±ç¬‘: æ€ã‚ãšå¹ãå‡ºã—ã¦ç¬‘ã†ã“ã¨"
            },
            {
                q: "ç‰©ãŒã‚†ã‚‰ã‚†ã‚‰ã‚†ã‚Œã‚‹",
                choices: ["ãªã³ã", "ã¶ã‚Œã‚‹", "ãµã‚‹ãˆã‚‹", "ãŸã‚†ãŸã†", "ã¯ãŸã‚ã"],
                answer: 3,
                explanation: "ãŸã‚†ãŸã†: ã‚†ã‚‰ã‚†ã‚‰ã¨æ¼‚ã†ã“ã¨"
            },
            {
                q: "çµŒé¨“ã‚’ç©ã‚“ã§äººæŸ„ãªã©ãŒå††ç†Ÿã™ã‚‹ã“ã¨",
                choices: ["è€ç·´", "æ™©æˆ", "æˆç†Ÿ", "è€æˆ", "å¤§æˆ"],
                answer: 3,
                explanation: "è€æˆ: çµŒé¨“ã‚’ç©ã‚“ã§äººæ ¼ãŒå††ç†Ÿã™ã‚‹ã“ã¨"
            },
            {
                q: "ä½•ã‚‚ã—ãªã„ã§å‚è¦³ã—ã¦ã„ã‚‹",
                choices: ["è…°ã‚’ã™ãˆã‚‹", "å£ã‚’ã¬ãã†", "ç›®ã‚’ã¤ã¶ã‚‹", "è¶³ã‚’ã¨ã‚ã‚‹", "æ‰‹ã‚’ã“ã¾ã­ã"],
                answer: 4,
                explanation: "æ‰‹ã‚’ã“ã¾ã­ã: ä½•ã‚‚ã—ãªã„ã§å‚è¦³ã™ã‚‹ã“ã¨"
            },
            {
                q: "ç›´æ¥ã¯è¨€è‘‰ã«è¡¨ã•ãªã„ã¨ã“ã‚",
                choices: ["æœ¬å¿ƒ", "ç„¡è¨€", "ä»–æ„", "ä½™å¿µ", "è¨€å¤–"],
                answer: 4,
                explanation: "è¨€å¤–: è¨€è‘‰ã«ã¯ç›´æ¥è¡¨ã‚Œã¦ã„ãªã„æ„å‘³"
            },
            {
                q: "ã‚„ã‚Šæ–¹ãªã©ã‚’å—ã‘ç¶™ãã€ã—ãŸãŒã†ã“ã¨",
                choices: ["å› ç¿’", "æ…£ä¾‹", "ä¼æ‰¿", "è¸è¥²", "ä¼çµ±"],
                answer: 3,
                explanation: "è¸è¥²: å‰ä¾‹ã«å¾“ã†ã“ã¨"
            },
            {
                q: "ã©ã†ã«ã‚‚ãªã‚‰ãªã„ã“ã¨ã‚’æ®‹å¿µãŒã‚‹",
                choices: ["æ°—ã«ç—…ã‚€", "ã»ãã‚’ã‹ã‚€", "èƒ¸ã‚’ç—›ã‚ã‚‹", "è…•ã‚’ã“ã¾ã­ã", "ã“ã†ã¹ã‚’ãŸã‚Œã‚‹"],
                answer: 1,
                explanation: "ã»ãã‚’ã‹ã‚€: å¾Œæ‚”ã™ã‚‹ã“ã¨"
            },
            {
                q: "å¿ƒãŒããŸãªãã€ã„ã‚„ã—ã„",
                choices: ["ãŒã‚ã¤ã„", "ã•ã‚‚ã—ã„", "ã‚ãã©ã„", "ã¯ã—ãŸãªã„", "æ„åœ°ããŸãªã„"],
                answer: 1,
                explanation: "ã•ã‚‚ã—ã„: å¿ƒãŒããŸãªãã€ã„ã‚„ã—ã„"
            },
            {
                q: "ä¸è¡Œãå±Šãã§ã‘ã—ã‹ã‚‰ã¬ã“ã¨",
                choices: ["ä¸å€«", "ä¸ç¾©", "ä¸åŸ’", "ä¸å®Ÿ", "ä¸å¾³"],
                answer: 2,
                explanation: "ä¸åŸ’: é“ç†ã«å¤–ã‚Œã¦ã„ã‚‹ã“ã¨"
            },
            {
                q: "å½“ã‚’å¾—ãŸã“ã¨ã°",
                choices: ["é‡‘è¨€", "å·§è¨€", "è‡³è¨€", "åè¨€", "æ ¼è¨€"],
                answer: 2,
                explanation: "è‡³è¨€: å½“ã‚’å¾—ãŸè¨€è‘‰"
            },
            {
                q: "è¨€è‘‰ã‚’åŠ ãˆãŸã‚Šè¨€ã„ã‹ãˆãŸã‚Šã—ã¦åˆ†ã‹ã‚Šã‚„ã™ãèª¬æ˜ã™ã‚‹ã“ã¨",
                choices: ["å•“ç™º", "å–§ä¼", "ç¤ºå”†", "æŒ‡å—", "æ•·è¡"],
                answer: 4,
                explanation: "æ•·è¡: è©³ã—ãèª¬æ˜ã™ã‚‹ã“ã¨"
            },
            {
                q: "ä¸¦å¤–ã‚Œã¦ç¨‹åº¦ã‚’è¶…ãˆã‚‹ã“ã¨",
                choices: ["å¸Œä»£", "è«å¤§", "çµ¶å¤§", "å¥‡æŠœ", "æ³•å¤–"],
                answer: 4,
                explanation: "æ³•å¤–: å¸¸è­˜ã‚’è¶…ãˆã¦ã„ã‚‹ã“ã¨"
            },
            {
                q: "ã—ã‹ãŸãŒãªã„ã¨æ€ã£ã¦å—ã‘ã‚‹",
                choices: ["ãŸãˆã‚‹", "ã‚ã¾ã‚“ãšã‚‹", "ã¸ã‚Šãã ã‚‹", "ã‚‚ã¦ã‚ã¾ã™", "ã²ã‚‰ããªãŠã‚‹"],
                answer: 1,
                explanation: "ã‚ã¾ã‚“ãšã‚‹: ä»•æ–¹ãªãå—ã‘å…¥ã‚Œã‚‹ã“ã¨"
            },
            {
                q: "ç‰©äº‹ãŒé€²è¡Œã—ã¦ãŠã‚‚ã—ã‚ããªã£ãŸã¨ã“ã‚",
                choices: ["é ‚ç‚¹", "ä½³å¢ƒ", "è¦æ‰€", "é†é†å‘³", "æ­£å¿µå ´"],
                answer: 1,
                explanation: "ä½³å¢ƒ: æœ€ã‚‚é¢ç™½ã„å ´é¢"
            },
            {
                q: "å•é¡Œã¨ã•ã‚ŒãªãŒã‚‰ã¾ã è§£æ±ºãŒã¤ã‹ãªã„äº‹æŸ„",
                choices: ["ä¿ç•™", "æ‡¸æ¡ˆ", "æœªæ±º", "é›£å•", "æ£šä¸Šã’"],
                answer: 1,
                explanation: "æ‡¸æ¡ˆ: æœªè§£æ±ºã®å•é¡Œ"
            },
            {
                q: "å¿ƒã‚’ã„ãŸã‚ãªã‚„ã¾ã™ã“ã¨",
                choices: ["è…å¿ƒ", "ç–‘å¿ƒ", "é€†å¿ƒ", "è™šå¿ƒ", "åŸ·å¿ƒ"],
                answer: 0,
                explanation: "è…å¿ƒ: å¿ƒã‚’æ‚©ã¾ã™ã“ã¨"
            },
            {
                q: "ãŸã‚ã‚‰ã‚ãšã«æ€ã„åˆ‡ã£ã¦ã™ã‚‹ã•ã¾",
                choices: ["æœæ–­", "æ„šç›´", "çŸ­æ…®", "ç„¡è¬€", "å‹‡æ•¢"],
                answer: 0,
                explanation: "æœæ–­: æ€ã„åˆ‡ã‚ŠãŒã‚ˆã„ã“ã¨"
            },
            {
                q: "ã­ã‚‰ã„ã‚’å®šã‚ã‚‹ã“ã¨",
                choices: ["ç›®æ˜Ÿ", "ç›®æ¨™", "æ¨™çš„", "è¦‹å½“", "ç…§æº–"],
                answer: 4,
                explanation: "ç…§æº–: ç‹™ã„ã‚’å®šã‚ã‚‹ã“ã¨"
            },
            {
                q: "ãŠã—ã¯ã‹ã‚‹ã“ã¨ã€æ€ã„ã‚„ã‚‹ã“ã¨",
                choices: ["æ¨è€ƒ", "é¡æ¨", "æ¨è«–", "æ¨å¯Ÿ", "æ¨å®š"],
                answer: 3,
                explanation: "æ¨å¯Ÿ: æ¨ã—é‡ã‚‹ã“ã¨"
            },
            {
                q: "å·§ã¿ã§ãªã„ã“ã¨",
                choices: ["ã¤ãŸãªã„", "ãã“ã¡ãªã„", "ãŸã‚ã„ãªã„", "ãµãŒã„ãªã„", "ãŠã¼ã¤ã‹ãªã„"],
                answer: 0,
                explanation: "ã¤ãŸãªã„: å·§ã¿ã§ãªã„ã“ã¨"
            },
            {
                q: "ä»–ã®æ„è¦‹ã«åå¯¾ã—ã¦è«–ã˜è¿”ã™ã“ã¨",
                choices: ["å£è«–", "åç™º", "åé§", "è«–äº‰", "è«–ç ´"],
                answer: 2,
                explanation: "åé§: åè«–ã™ã‚‹ã“ã¨"
            },
            {
                q: "ãã®ã“ã¨ã ã‘ã«ã‹ã‹ã‚ã£ã¦ã€ä»–ã‚’ãŠã‚ãã‹ã«ã™ã‚‹",
                choices: ["ã²ãŸã‚‹", "ã‹ã¾ã‘ã‚‹", "ã„ãã—ã‚€", "ã‹ã‹ã‚Šãã‚‹", "ãªãŠã–ã‚Šã«ã™ã‚‹"],
                answer: 1,
                explanation: "ã‹ã¾ã‘ã‚‹: ç†±ä¸­ã—ã¦ä»–ã‚’æ€ ã‚‹ã“ã¨"
            },
            {
                q: "ä»–äººã®æ¨©åˆ©ã‚’å‚·ã¤ã‘ãŸã‚Šã€ç¤¾ä¼šç§©åºã‚’ä¹±ã—ãŸã‚Šã™ã‚‹",
                choices: ["å¨åœ§ã™ã‚‹", "æ„šå¼„ã™ã‚‹", "è¹‚èº™ã™ã‚‹", "å¸­å·»ã™ã‚‹", "ç± çµ¡ã™ã‚‹"],
                answer: 2,
                explanation: "è¹‚èº™: è¸ã¿ã«ã˜ã‚‹ã“ã¨"
            },
            {
                q: "å¢ƒé‡ã«æº€è¶³ã—ã¦ã„ã‚‹ã•ã¾ã‚’è¨€å‹•ã«è¡¨ã™ã“ã¨",
                choices: ["è‡³ç¦", "é—Šé”", "æº€å–«", "è¬³æ­Œ", "æœ‰é ‚å¤©"],
                answer: 3,
                explanation: "è¬³æ­Œ: å£°é«˜ã‚‰ã‹ã«æ­Œã†ã‚ˆã†ã«è¡¨ç¾ã™ã‚‹ã“ã¨"
            },
            {
                q: "ä½•ã‚‚ã›ãšã¶ã‚‰ã¶ã‚‰ã—ã¦ã„ã‚‹ã“ã¨",
                choices: ["å®‰ç©", "æ€ æƒ°", "ç„¡ç²¾", "ç„¡ç‚º", "æ‚ é•·"],
                answer: 3,
                explanation: "ç„¡ç‚º: ä½•ã‚‚ã—ãªã„ã“ã¨"
            },
            {
                q: "ç«‹æ´¾ã«è¦‹ã›ã‚ˆã†ã¨ã—ã¦ã†ã‚ã¹ã‚’é£¾ã‚‹ã“ã¨",
                choices: ["è£…é£¾", "ç²‰é£¾", "å½©é£¾", "è¦‹æ „", "ä¸Šå¡—ã‚Š"],
                answer: 1,
                explanation: "ç²‰é£¾: è¡¨é¢ã‚’ç¾ã—ãé£¾ã‚‹ã“ã¨"
            },
            {
                q: "å¥½ã¾ã—ããªã„ã¨ã—ã¦æ‹’ã¿é€€ã‘ã‚‹ã“ã¨",
                choices: ["æ„æ°—", "é‚ªé™º", "æ•¬é ", "ç–å¤–", "æ’æ–¥"],
                answer: 4,
                explanation: "æ’æ–¥: æŠ¼ã—ã®ã‘ã¦é€€ã‘ã‚‹ã“ã¨"
            },
            {
                q: "ä¸€æ™‚ã—ã®ãã«ã¨ã‚Šã¤ãã‚ã£ã¦ãŠãã“ã¨",
                choices: ["è™šå‹¢", "è¦‹æ „", "ç³Šå¡—", "è™šé£¾", "ä¸Šå¡—ã‚Š"],
                answer: 2,
                explanation: "ç³Šå¡—: ä¸€æ™‚çš„ã«ã”ã¾ã‹ã™ã“ã¨"
            },
            {
                q: "å€‹äººã®åˆ¤æ–­ã§å‡¦ç†ã™ã‚‹ã“ã¨",
                choices: ["å°‚æ¨ª", "ç§è¦‹", "è£é‡", "ç‹¬æ–­", "è‹±æ–­"],
                answer: 2,
                explanation: "è£é‡: è‡ªåˆ†ã®åˆ¤æ–­ã§å‡¦ç†ã™ã‚‹ã“ã¨"
            },
            {
                q: "ã‚ã‚ã¦ãšã‚†ã£ãã‚Šã¨äº‹ã‚’å§‹ã‚ã‚‹ã•ã¾",
                choices: ["ã‚ˆã†ã‚„ã", "ãŠã„ãŠã„ã«", "ãŠã£ã¨ã‚Šã¨", "ãŠã‚‚ã‚€ã‚ã«", "ã˜ã£ãã‚Šã¨"],
                answer: 3,
                explanation: "ãŠã‚‚ã‚€ã‚ã«: ã‚†ã£ãã‚Šã¨å‹•ä½œã‚’å§‹ã‚ã‚‹ã•ã¾"
            },
            {
                q: "ãªã‚Šãµã‚Šã‹ã¾ã‚ãšæ‡¸å‘½ã«äº‹ã«ã‚ãŸã£ã¦ã„ã‚‹æ§˜å­",
                choices: ["ã‘ãªã’", "ã²ãŸã‚€ã", "ã‚„ã¿ãã‚‚", "ãŠãŠã‚ã‚‰ã‚", "ã¦ã‚“ã¦ã“ã¾ã„"],
                answer: 3,
                explanation: "ãŠãŠã‚ã‚‰ã‚: å¤§é¨’ãã‚’ã™ã‚‹ã•ã¾"
            },
            {
                q: "ã‚ã„ã¾ã„ãªæ‰€ãŒãªã„ã‚ˆã†ã«ç´°ã‹ãæ°—ã‚’é…ã£ã¦ä¸å¿µãªã“ã¨",
                choices: ["å…‹æ˜", "å‘¨åˆ°", "ç²¾å·§", "ç¹Šç´°", "ç·»å¯†"],
                answer: 0,
                explanation: "å…‹æ˜: è©³ã—ãæ˜ã‚‰ã‹ãªã“ã¨"
            },
            {
                q: "äººã‚’å¨åœ§ã™ã‚‹ã‚ˆã†ãªæ…‹åº¦",
                choices: ["æ¨ªæŸ„", "å°Šå¤§", "å±…ä¸ˆé«˜", "é‰„é¢çš®", "å¨é¢¨å ‚ã€…"],
                answer: 2,
                explanation: "å±…ä¸ˆé«˜: å¨åœ§çš„ã§é«˜åœ§çš„ãªæ…‹åº¦"
            },
            {
                q: "æ®Šå‹ãªå¿ƒãŒã‘ã®æŒã¡ä¸»ã ",
                choices: ["å¥æ°—ãª", "å¯æ†ãª", "å„ªé›…ãª", "åˆ©å£ãª", "å …å®Ÿãª"],
                answer: 0,
                explanation: "å¥æ°—: ã‘ãªã’ãªã€ç«‹æ´¾ãªå¿ƒãŒã‘ã®"
            },
            {
                q: "ã‚ãŒã¾ã¾ã§å¥½ãå‹æ‰‹ã«æŒ¯ã‚‹èˆã†ã“ã¨",
                choices: ["åšé¡”", "å‚²æ…¢", "å°‚æ¨ª", "ç‹¬æ–­", "ä¸éœ"],
                answer: 2,
                explanation: "å°‚æ¨ª: ã‚ãŒã¾ã¾å‹æ‰‹ã«æŒ¯ã‚‹èˆã†ã“ã¨"
            },
            {
                q: "ç´°ã‹ãä¸¹å¿µãªè¨˜éŒ²",
                choices: ["å…‹æ˜ãª", "å‘¨åˆ°ãª", "ç²¾å¯†ãª", "ç¹Šç´°ãª", "è‚è¦ãª"],
                answer: 0,
                explanation: "å…‹æ˜: è©³ã—ãæ˜ã‚‰ã‹ãªã“ã¨"
            },
            {
                q: "ã¤ã¤ã¿ã‹ãã•ãªã„ã•ã¾",
                choices: ["éœ²å‘ˆ", "æš´éœ²", "ã‚ã‘ã™ã‘", "ã‚ã‹æŠœã‘", "ã¤ã¤æŠœã‘"],
                answer: 2,
                explanation: "ã‚ã‘ã™ã‘: åŒ…ã¿éš ã•ãšã€ç‡ç›´ãªã•ã¾"
            },
            {
                q: "ã‚ã‚‹å­¦å•ãƒ»æŠ€è¡“ã«ã¤ã„ã¦åºƒãæ·±ã„çŸ¥è­˜ã¨ç†è§£ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨",
                choices: ["è‹±çŸ¥", "å¥¥ç¾©", "é€ è©£", "å«è“„", "é«˜å°š"],
                answer: 2,
                explanation: "é€ è©£: å­¦å•ãƒ»æŠ€èŠ¸ã«æ·±ãé€šã˜ã¦ã„ã‚‹ã“ã¨"
            },
            {
                q: "ãã†ã™ã‚‹ã‚ˆã‚Šã»ã‹ã«ãªã„",
                choices: ["ç”³ã—åˆ†ãªã„", "ã»ã‹ãªã‚‰ãªã„", "ã•ã—ã•ã‚ã‚Šãªã„", "ã‚ˆã‚“ã©ã“ã‚ãªã„", "æŠœãå·®ã—ãªã‚‰ãªã„"],
                answer: 3,
                explanation: "ã‚ˆã‚“ã©ã“ã‚ãªã„: ã‚„ã‚€ã‚’å¾—ãªã„ã€ä»•æ–¹ãŒãªã„"
            },
            {
                q: "ä»²ãŒæ‚ªãã«ã‚‰ã¿åˆã†ã“ã¨",
                choices: ["æ•µè¦–", "æ•µå¯¾", "åæŠ—", "åç›®", "èƒŒå"],
                answer: 3,
                explanation: "åç›®: ä»²ãŒæ‚ªãã«ã‚‰ã¿åˆã†ã“ã¨"
            },
            {
                q: "ã ã‚“ã ã‚“ã„ã„æ°—ã«ãªã£ã¦äººã‚’è¦‹ä¸‹ã—ãŸãµã‚‹ã¾ã„ã‚’ã™ã‚‹ã“ã¨",
                choices: ["è™šå‹¢", "èª‡ç¤º", "è‡ªè² ", "å¢—é•·", "ä¸éœ"],
                answer: 3,
                explanation: "å¢—é•·: ã ã‚“ã ã‚“èª¿å­ã«ä¹—ã£ã¦æ€ã„ä¸ŠãŒã‚‹ã“ã¨"
            },
            {
                q: "ã‚‚ã®ã”ã¨ã®æ‰±ã„æ–¹ãŒãã‚“ã–ã„ãªã“ã¨",
                choices: ["æ¨ªç€", "ç²—ç•¥", "ç²—æ¼", "ç„¡è¬€", "ä¹±æš´"],
                answer: 1,
                explanation: "ç²—ç•¥: æ‰±ã„ãŒãã‚“ã–ã„ãªã“ã¨"
            },
            {
                q: "å³ã—ãåŒºåˆ¥ã™ã‚‹ã“ã¨",
                choices: ["é‘‘åˆ¥", "å·®åˆ¥", "è­˜åˆ¥", "å³»åˆ¥", "åˆ¤åˆ¥"],
                answer: 3,
                explanation: "å³»åˆ¥: å³ã—ãåŒºåˆ¥ã™ã‚‹ã“ã¨"
            },
            {
                q: "å‹ã¤è¦‹è¾¼ã¿ãŒå¤§ãã„",
                choices: ["æ¸…ç®—", "ç›®ç®—", "å…¬ç®—", "æ¦‚ç®—", "è©¦ç®—"],
                answer: 2,
                explanation: "å…¬ç®—: è¦‹è¾¼ã¿ã€å¯èƒ½æ€§"
            }
        ];

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let selectedCount = 0;
        let currentQuestions = [];
        let currentIndex = 0;
        let correctCount = 0;
        let wrongQuestions = [];

        // å•é¡Œæ•°è¨­å®š
        function setCount(count) {
            selectedCount = count;
            updateStartButton();
        }

        function setCustomCount() {
            const input = document.getElementById('customCount');
            const count = parseInt(input.value);
            if (count >= 1 && count <= 50) {
                selectedCount = count;
                updateStartButton();
            } else {
                alert('1ã‹ã‚‰50ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„');
            }
        }

        function updateStartButton() {
            const btn = document.getElementById('startBtn');
            if (selectedCount > 0) {
                btn.disabled = false;
                btn.textContent = selectedCount + 'å•ã§ã‚¹ã‚¿ãƒ¼ãƒˆ';
            } else {
                btn.disabled = true;
                btn.textContent = 'ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹ã™ã‚‹';
            }
        }

        // ã‚¯ã‚¤ã‚ºé–‹å§‹
        function startQuiz() {
            if (selectedCount === 0) return;

            // å•é¡Œã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦é¸æŠ
            const shuffled = questions.sort(() => Math.random() - 0.5);
            currentQuestions = shuffled.slice(0, selectedCount);
            
            currentIndex = 0;
            correctCount = 0;
            wrongQuestions = [];

            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            document.getElementById('home').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            document.getElementById('resultScreen').classList.add('hidden');

            showQuestion();
        }

        // å•é¡Œè¡¨ç¤º
        function showQuestion() {
            const question = currentQuestions[currentIndex];
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
            const progress = (currentIndex / currentQuestions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // å•é¡Œç•ªå·
            document.getElementById('questionNumber').textContent = 
                `å•é¡Œ ${currentIndex + 1} / ${currentQuestions.length}`;
            
            // å•é¡Œæ–‡
            document.getElementById('questionText').textContent = question.q;
            
            // é¸æŠè‚¢
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            
            question.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = String.fromCharCode(65 + index) + '. ' + choice;
                btn.onclick = () => selectChoice(index);
                choicesDiv.appendChild(btn);
            });
            
            // çµæœãƒ»è§£èª¬ã‚’éš ã™
            document.getElementById('result').classList.add('hidden');
            document.getElementById('explanation').classList.add('hidden');
            document.getElementById('nextBtn').classList.add('hidden');
        }

        // å›ç­”é¸æŠ
        function selectChoice(selected) {
            const question = currentQuestions[currentIndex];
            const choices = document.querySelectorAll('.choice-btn');
            
            // ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            choices.forEach(btn => {
                btn.classList.add('disabled');
                btn.onclick = null;
            });
            
            // æ­£è§£ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            choices[question.answer].classList.add('correct');
            
            // çµæœè¡¨ç¤º
            const resultDiv = document.getElementById('result');
            if (selected === question.answer) {
                correctCount++;
                resultDiv.textContent = 'âœ… æ­£è§£ï¼';
                resultDiv.className = 'result correct';
            } else {
                choices[selected].classList.add('incorrect');
                resultDiv.textContent = 'âŒ ä¸æ­£è§£';
                resultDiv.className = 'result incorrect';
                wrongQuestions.push(question);
            }
            resultDiv.classList.remove('hidden');
            
            // è§£èª¬è¡¨ç¤º
            const explanationDiv = document.getElementById('explanation');
            explanationDiv.innerHTML = '<strong>è§£èª¬:</strong> ' + question.explanation;
            explanationDiv.classList.remove('hidden');
            
            // æ¬¡ã¸ãƒœã‚¿ãƒ³è¡¨ç¤º
            const nextBtn = document.getElementById('nextBtn');
            if (currentIndex < currentQuestions.length - 1) {
                nextBtn.textContent = 'æ¬¡ã®å•é¡Œã¸';
            } else {
                nextBtn.textContent = 'çµæœã‚’è¦‹ã‚‹';
            }
            nextBtn.classList.remove('hidden');
        }

        // æ¬¡ã®å•é¡Œã¸
        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // çµæœè¡¨ç¤º
        function showResult() {
            const percentage = Math.round((correctCount / currentQuestions.length) * 100);
            
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            document.getElementById('finalScore').textContent = 
                correctCount + ' / ' + currentQuestions.length + ' æ­£è§£';
            document.getElementById('percentage').textContent = 'æ­£è§£ç‡: ' + percentage + '%';
            
            // å¾©ç¿’ãƒœã‚¿ãƒ³
            const retryBtn = document.getElementById('retryBtn');
            if (wrongQuestions.length > 0) {
                retryBtn.classList.remove('hidden');
                retryBtn.textContent = 'é–“é•ãˆãŸå•é¡Œã‚’å¾©ç¿’ (' + wrongQuestions.length + 'å•)';
            } else {
                retryBtn.classList.add('hidden');
            }
        }

        // ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
        function goHome() {
            document.getElementById('home').classList.remove('hidden');
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('resultScreen').classList.add('hidden');
            
            selectedCount = 0;
            document.getElementById('customCount').value = '';
            updateStartButton();
        }

        // é–“é•ãˆãŸå•é¡Œã‚’å¾©ç¿’
        function retryWrong() {
            if (wrongQuestions.length === 0) return;
            
            currentQuestions = [...wrongQuestions];
            selectedCount = wrongQuestions.length;
            currentIndex = 0;
            correctCount = 0;
            wrongQuestions = [];
            
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            
            showQuestion();
        }
    </script>
</body>
</html>
